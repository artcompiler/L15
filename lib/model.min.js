var boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString),forEach=function(b,c,f){if(Array.prototype.forEach)return b.forEach(c);b=toObject(b);var a=splitString&&"[object String]"==_toString(b)?b.split(""):b,d=-1,e=a.length>>>0;if("[object Function]"!=_toString(c))throw new TypeError;for(;++d<e;)d in a&&c.call(f,a[d],d,b)},filter=function(b,c,f){if(Array.prototype.filter)return b.filter(c);var a=toObject(b);b=splitString&&"[object String]"==_toString(b)?b.split(""):a;var d=
b.length>>>0,e=[],n;if("[object Function]"!=_toString(c))throw new TypeError(c+" is not a function");for(var l=0;l<d;l++)l in b&&(n=b[l],c.call(f,n,l,a)&&e.push(n));return e},every=function(b,c,f){if(Array.prototype.every)return b.every(c,f);var a=toObject(b);b=splitString&&"[object String]"==_toString(b)?b.split(""):a;var d=b.length>>>0;if("[object Function]"!=_toString(c))throw new TypeError(c+" is not a function");for(var e=0;e<d;e++)if(e in b&&!c.call(f,b[e],e,a))return!1;return!0},some=function(b,
c,f){if(Array.prototype.some)return b.some(c,f);var a=toObject(b);b=splitString&&"[object String]"==_toString(b)?b.split(""):a;var d=b.length>>>0;if("[object Function]"!=_toString(c))throw new TypeError(c+" is not a function");for(var e=0;e<d;e++)if(e in b&&c.call(f,b[e],e,a))return!0;return!1},indexOf=function(b,c){var f=arguments[2];if(Array.prototype.indexOf)return b.indexOf(c,f);var a=splitString&&"[object String]"==_toString(b)?b.split(""):toObject(b),d=a.length>>>0;if(!d)return-1;var e=0;2<
arguments.length&&(e=toInteger(f));for(e=0<=e?e:Math.max(0,d+e);e<d;e++)if(e in a&&a[e]===c)return e;return-1},keys=function(b){if(Object.keys)return Object.keys(b);var c=!0,f="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),a=f.length,d;for(d in{toString:null})c=!1;if("object"!=typeof b&&"function"!=typeof b||null===b)throw new TypeError("Object.keys called on a non-object");d=[];for(var e in b)owns(b,e)&&d.push(e);if(c)for(c=0;c<a;c++)e=
f[c],owns(b,e)&&d.push(e);return d},toObject=function(b){if(null==b)throw new TypeError("can't convert "+b+" to object");return Object(b)},prototypeOfObject=Object.prototype,_toString=function(b){return prototypeOfObject.toString.apply(b)},owns=function(b,c){return prototypeOfObject.hasOwnProperty.call(b,c)},create=function(b){if(Object.create)return Object.create(b);var c=function(){};if(1!=arguments.length)throw Error("Object.create implementation only accepts one parameter.");c.prototype=b;return new c};var ASSERT=!0,assert=function(){return ASSERT?function(b,c){void 0===c&&(c="failed!");if(!b){var f=Error(c);f.location=Assert.location;throw f;}}:function(){}}(),message=function(b,c){var f=Assert.messages[b];c&&forEach(c,function(b,c){f=f.replace("%"+(c+1),b)});return b+": "+f},reserveCodeRange=function(b,c,f){assert(b<=c,"Invalid code range");var a=every(Assert.reservedCodes,function(a){return c<a.first||b>a.last});assert(a,"Conflicting request for error code range");Assert.reservedCodes.push({first:b,
last:c,name:f})},setLocation=function(b){Assert.location=b},clearLocation=function(){Assert.location=null},Assert={assert:assert,message:message,messages:{},reserveCodeRange:reserveCodeRange,reservedCodes:[],setLocation:setLocation,clearLocation:clearLocation};var TRACE=!1,global=this,trace=function(){return TRACE?function(b){if(global.console&&global.console.log)console.log(b);else if(global.print)print(b);else throw"No trace function defined!";}:function(){}}();var Ast=function(){function b(){}function c(b){void 0===b&&(b=this);return b.op&&b.args}var f=["unused"],a={};b.clearPool=function(){f=["unused"];a={}};b.prototype.create=function e(b,a){var c=e(this);"string"===typeof b?(c.op=b,c.args=a instanceof Array?a:[]):null!==b&&"object"===typeof b&&forEach(keys(b),function(a,p){c[a]=b[a]});return c};b.prototype.arg=function(b){if(!c(this))throw"Malformed node";this.args.push(b);return this};b.prototype.argN=function(b,a){if(!c(this))throw"Malformed node";
if(void 0===a)return this.args[b];this.args[b]=a;return this};b.prototype.args=function(b){if(!c(this))throw"Malformed node";if(void 0===b)return this.args;this.args=b;return this};b.prototype.isNode=c;b.intern=b.prototype.intern=function n(l){this instanceof b&&void 0===l&&c(this)&&(l=this);"number"===typeof l?l={op:"num",args:[l.toString()]}:"string"===typeof l&&(l={op:"str",args:[l]});assert("object"===typeof l,"node not an object");for(var w=l.op,r=l.args.length,p="",I=[],k=0;k<r;k++)p="str"===
l.op||"num"===l.op||"var"===l.op?p+(I[k]=l.args[k]):p+(I[k]=n(l.args[k]));l=w+r+p;r=a[l];void 0===r&&(f.push({op:w,args:I}),r=f.length-1,a[l]=r);return r};b.prototype.node=function(b){b=JSON.parse(JSON.stringify(f[b]));create(b);switch(b.op){case "num":case "str":case "var":break;default:for(var a=0;a<b.args.length;a++)b.args[a]=this.node(b.args[a])}return b};b.dumpAll=b.prototype.dumpAll=function(){var a="";forEach(f,function(c,f){a+="\n"+f+": "+b.dump(c)});return a};b.dump=b.prototype.dump=function l(b){if("string"===
typeof b)var a='"'+b+'"';else if("number"===typeof b)a=b;else{for(var a='{ op: "'+b.op+'", args: [ ',c=0;c<b.args.length;c++)0<c&&(a+=" , "),a+=l(b.args[c]);a+=" ] }"}return a};return b}();var Model=function(){function b(){}b.fn={};var c=b.prototype=new Ast;Assert.reserveCodeRange(1E3,1999,"model");Assert.messages[1001]="Invalid syntax. '%1' expected, '%2' found.";Assert.messages[1002]="Square brackets can only be used to denote intervals.";Assert.messages[1003]="Extra characters in input at position: %1, lexeme: %2.";Assert.messages[1004]="Invalid character '%1' (%2) in input.";var f=Assert.message;b.create=c.create=function w(a,p){assert(a,"Model.create() called with invalid argument "+
a);if(a instanceof b)return p&&(a.location=p),a;if(!(this instanceof b))return(new b).create(a,p);var d=w(this);d.location=p;a="string"===typeof a?n(a).expr():JSON.parse(JSON.stringify(a));forEach(keys(b.fn),function(a,p){c.hasOwnProperty(a)||(c[a]=function(){var c=b.fn[a];if(1<arguments.length&&arguments[1]instanceof b)return c.apply(this,arguments);for(var p=[this],d=0;d<arguments.length;d++)p.push(arguments[d]);return c.apply(this,p)})});forEach(keys(a),function(b,c){d[b]=a[b]});return d};b.fromLaTex=
c.fromLaTex=function(a){assert("string"===typeof a,"Model.prototype.fromLaTex");return this?this.create(a):b.create(a)};c.toLaTex=function(b){return e(b)};var a={ADD:"+",SUB:"-",MUL:"times",DIV:"div",FRAC:"frac",EQL:"=",ATAN2:"atan2",SQRT:"sqrt",PM:"pm",SIN:"sin",COS:"cos",TAN:"tan",SEC:"sec",COT:"cot",CSC:"csc",LOG:"log",LN:"ln",LG:"lg",VAR:"var",NUM:"num",CST:"cst",COMMA:",",POW:"^",SUBSCRIPT:"_",ABS:"abs",PAREN:"()",HIGHLIGHT:"hi",LT:"lt",LE:"le",GT:"gt",GE:"ge",INTERVAL:"interval",EXISTS:"exists",
IN:"in",FORALL:"forall",LIM:"lim",EXP:"exp",TO:"to",SUM:"sum",INT:"int",PROD:"prod",PERCENT:"%"};forEach(keys(a),function(c,d){b[c]=a[c]});var d={};d[a.ADD]="+";d[a.SUB]="-";d[a.MUL]="\\times";d[a.DIV]="\\div";d[a.FRAC]="\\frac";d[a.EQL]="=";d[a.ATAN2]="\\atan2";d[a.POW]="^";d[a.SUBSCRIPT]="_";d[a.PM]="\\pm";d[a.SIN]="\\sin";d[a.COS]="\\cos";d[a.TAN]="\\tan";d[a.SEC]="\\sec";d[a.COT]="\\cot";d[a.CSC]="\\csc";d[a.LN]="\\ln";d[a.COMMA]=",";var e=function r(b){var c="";if("string"===typeof b)c=b;else if("number"===
typeof b)c=b;else if("object"===typeof b){for(var k=[],f=0;f<b.args.length;f++)k[f]=r(b.args[f]);switch(b.op){case a.VAR:case a.CST:case a.NUM:c=b.args[0];break;case a.SUB:c=1===b.args.length?d[b.op]+" "+k[0]:k[0]+" "+d[b.op]+" "+k[1];break;case a.DIV:case a.PM:case a.EQL:c=k[0]+" "+d[b.op]+" "+k[1];break;case a.POW:var f=b.args[0],e=b.args[1];if(f.args&&2===f.args.length||e.args&&2===e.args.length)if(f.op===a.ADD||f.op===a.SUB||f.op===a.MUL||f.op===a.DIV||f.op===a.SQRT)k[0]=" ("+k[0]+") ";c="{"+
k[0]+"^{"+k[1]+"}}";break;case a.SIN:case a.COS:case a.TAN:case a.SEC:case a.COT:case a.CSC:case a.LN:c="{"+d[b.op]+"{"+k[0]+"}}";break;case a.FRAC:c="\\dfrac{"+k[0]+"}{"+k[1]+"}";break;case a.SQRT:switch(k.length){case 1:c="\\sqrt{"+k[0]+"}";break;case 2:c="\\sqrt["+k[0]+"]{"+k[1]+"}"}break;case a.MUL:var n,c="";forEach(b.args,function(f,e){if(f.args&&2<=f.args.length){if(f.op===a.ADD||f.op===a.SUB)k[e]="("+k[e]+")";0!==e&&"number"===typeof f&&(c+=d[b.op]+" ")}else f.op===a.PAREN||f.op===a.VAR||
f.op===a.CST||"number"===typeof n&&"number"!==typeof f||0!==e&&(c+=" "+d[b.op]+" ");c+=k[e];n=f});break;case a.ADD:case a.COMMA:forEach(k,function(a,f){c=0===f?a:c+" "+d[b.op]+" "+a});break;default:assert(!1,"unimplemented eval operator")}}else assert(!1,"invalid expression type");return c},n=function(a){function c(){m=oa;oa=x;m===x&&(m=s.start())}function d(b){var a=m;a!==b&&(b=String.fromCharCode(b),a=a?String.fromCharCode(a):"EOS",assert(!1,f(1001,[b,a])));c()}function e(){var a,q;switch(q=m){case 65:case t:a=
{op:"var",args:[s.lexeme()]};c();break;case 97:a={op:"var",args:[s.lexeme()]};c();break;case pa:a={op:"num",args:[s.lexeme()]};c();break;case wa:case y:d(q);a=u();d(tk2=m===J?J:z);2===a.args.length||q!==y&&tk2!==z||assert(!1,f(1002));a.lbrk=q;a.rbrk=tk2;break;case K:a=n();break;case A:c();q=n();a=n();a={op:b.MUL,args:[q,{op:b.POW,args:[a,{op:b.NUM,args:["-1"]}]}]};break;case L:c();switch(m){case y:d(y);q=u();d(z);a=n();a={op:b.POW,args:[a,q,{op:b.NUM,args:["-1"]}]};break;case K:a=n();a=a.op===b.POW?
{op:b.POW,args:[a.args[0],{op:b.MUL,args:[a.args[1],{op:b.POW,args:[{op:b.NUM,args:["2"]},{op:b.NUM,args:["-1"]}]}]}]}:{op:b.POW,args:[a,{op:b.NUM,args:["2"]},{op:b.NUM,args:["-1"]}]};break;default:assert(!1,f(1001,["{ or (",String.fromCharCode(m)]))}break;case M:case N:case O:case P:case Q:case R:c();for(a=[];m===B;)c(),a.push(v());a.unshift({op:h[q],args:[e()]});return 1<a.length?{op:b.POW,args:a}:a[0];case S:return c(),{op:b.LOG,args:[{op:b.VAR,args:["e"]},e()]};case T:return c(),{op:b.LOG,args:[{op:b.NUM,
args:["10"]},e()]};case U:return c(),a=[],m===C?(c(),a.push(e())):a.push({op:b.VAR,args:["e"]}),a.push(e()),{op:b.LOG,args:a};case V:return c(),a=[],d(C),a.push(e()),a.push(e()),{op:h[q],args:a};case W:case X:case Y:return c(),a=[],m===C&&(c(),a.push(e()),d(B),a.push(e())),a.push(u()),{op:h[q],args:a};case Z:return c(),{op:b.EXISTS,args:[$()]};case aa:return c(),{op:b.FORALL,args:[u()]};case ba:return c(),{op:b.EXP,args:[ca()]};default:assert(!1,"Model.primaryExpr() unexpected expression kind "+s.lexeme()),
a=void 0}return a}function n(){d(K);var b=u();d(qa);return b}function v(){var a;switch(m){case da:c();a=v();break;case D:c();a=v();a={op:b.SUB,args:[a]};break;default:switch(a=e(),m){case ra:c(),a={op:b.PERCENT,args:[a]}}}return a}function la(){for(var a=[v()];m===C;)c(),a.push(v());return 1<a.length?{op:b.SUBSCRIPT,args:a}:a[0]}function ma(){for(var a=[la()];m===B;)c(),a.push(la());return 1<a.length?{op:b.POW,args:a}:a[0]}function na(){for(var a,f,d=[ma()];(a=m)&&!sa(a)&&!ta(a)&&a!==E&&a!==ea&&a!==
qa&&a!==J&&a!==z;)a!==F&&a!==G||c(),f=ma(),a===G&&(f={op:b.POW,args:[f,{op:b.NUM,args:["-1"]}]}),d.push(f);return 1<d.length?{op:b.MUL,args:d}:d[0]}function ua(a){if("number"===typeof a)return-a;if(1===a.args.length){if(a.op===b.SUB)return a.args[0];if(a.op===b.ADD)return a.args[0]=ua(a.args[0]),a}else if(a.op===b.MUL)return a.args.unshift({op:b.NUM,args:["-1"]}),a;return{op:b.MUL,args:[{op:b.NUM,args:["-1"]},a]}}function sa(a){return a===da||a===D||a===H}function ca(){for(var a=na(),f;sa(f=m);){c();
var d=na();switch(f){case H:a={op:b.PM,args:[a,d]};break;case D:d=ua(d);default:a={op:b.ADD,args:[a,d]}}}return a}function ta(a){return a===fa||a===ga||a===ha||a===ia||a===ja||a===ka}function va(){for(var a=ca(),b;ta(b=m);){c();var d=ca();switch(b){default:a={op:h[b],args:[a,d]}}}return a}function $(){for(var a=va(),b;(b=m)===ea;){c();var d=va(),a={op:h[b],args:[a,d]}}return a}function u(){for(var a=$(),b=[a];m===E;)c(),b.push($());return 1<b.length?{op:h[E],args:b}:a}var x=0,da=43,B=94,C=95,N=261,
Q=264,R=265,G=47,ea=61,A=256,S=263,K=123,y=91,wa=40,F=42,pa=48,H=258,qa=125,z=93,J=41,P=262,M=259,L=257,D=45,O=260,t=97,E=44,T=267,U=268,fa=270,ga=271,ha=272,ia=273,Z=274,ja=275,aa=276,V=277,ba=278,ka=279,W=280,X=281,Y=282,ra=37,h=[],m=x,oa=x;h[A]="frac";h[L]="sqrt";h[da]="+";h[D]="-";h[H]="pm";h[B]="^";h[F]="times";h[G]="frac";h[M]="sin";h[N]="cos";h[O]="tan";h[P]="sec";h[Q]="cot";h[R]="csc";h[S]="ln";h[T]="lg";h[U]="log";h[ea]="=";h[E]=",";h[269]="text";h[fa]="lt";h[ga]="le";h[ha]="gt";h[ia]="ge";
h[Z]="exists";h[ja]="in";h[aa]="forall";h[V]="lim";h[ba]="exp";h[ka]="to";h[W]="sum";h[X]="int";h[Y]="prod";var s=function(a){function b(e){var f=String.fromCharCode(e);for(d+=f;97<=e&&122>=e;){e=a.charCodeAt(c++);var f=String.fromCharCode(e),k=d+f;if(!some(h,function(a){return 0===a.indexOf(k)}))break;d+=f}c--;return t}var c=0,d="",e=[];e["\\cdot"]=F;e["\\times"]=F;e["\\div"]=G;e["\\dfrac"]=A;e["\\frac"]=A;e["\\sqrt"]=L;e["\\pm"]=H;e["\\sin"]=M;e["\\cos"]=N;e["\\tan"]=O;e["\\sec"]=P;e["\\cot"]=Q;
e["\\csc"]=R;e["\\ln"]=S;e["\\lg"]=T;e["\\log"]=U;e["\\left"]=null;e["\\right"]=null;e["\\big"]=null;e["\\Big"]=null;e["\\bigg"]=null;e["\\Bigg"]=null;e["\\text"]=269;e["\\textrm"]=269;e["\\textit"]=269;e["\\textbf"]=269;e["\\lt"]=fa;e["\\le"]=ga;e["\\gt"]=ha;e["\\ge"]=ia;e["\\exists"]=Z;e["\\in"]=ja;e["\\forall"]=aa;e["\\lim"]=V;e["\\exp"]=ba;e["\\to"]=ka;e["\\sum"]=W;e["\\int"]=X;e["\\prod"]=Y;e["\\%"]=ra;var h="g cg kg mg ng m cm km mm nm L mL s cs ks ms ns in ft mi fl cup pt qt gal oz lb".split(" ");
return{start:function(){var g;for(d="";c<a.length;)switch(g=a.charCodeAt(c++)){case 32:case 9:case 10:case 13:continue;case 92:d+=String.fromCharCode(g);g=a.charCodeAt(c++);if(36===g)d=String.fromCharCode(g);else if(37===g)d+=String.fromCharCode(g);else{for(;97<=g&&122>=g||65<=g&&90>=g;)d+=String.fromCharCode(g),g=a.charCodeAt(c++);c--}g=e[d];if(void 0===g)g=t;else if(269===g){for(g=a.charCodeAt(c++);123!==g;)g=a.charCodeAt(c++);d="";for(g=a.charCodeAt(c++);125!==g;)g=String.fromCharCode(g),d+=g,
g=a.charCodeAt(c++);g=t}if(g)return g;d="";continue;case 37:case 40:case 41:case 42:case 43:case 44:case 45:case 47:case 61:case 91:case 93:case 94:case 95:case 123:case 125:return d+=String.fromCharCode(g),g;case 36:return d+=String.fromCharCode(g),t;default:if(65<=g&&90>=g)return d+=String.fromCharCode(g),t;if(97<=g&&122>=g)return b(g);if(46===g||48<=g&&57>=g){for(;48<=g&&57>=g||46===g;)d+=String.fromCharCode(g),g=a.charCodeAt(c++);c--;return pa}assert(!1,f(1004,[String.fromCharCode(g),g]));return 0}return 0},
lexeme:function(){return d},pos:function(){return c}}}(a);return{expr:function(){m=s.start();var a=u();assert(!m,f(1003,[s.pos(),s.lexeme()]));return a}}};return b}();
