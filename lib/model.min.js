var boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString),forEach=function(b,d,e){if(Array.prototype.forEach)return b.forEach(d);b=toObject(b);var p=splitString&&"[object String]"==_toString(b)?b.split(""):b,q=-1,l=p.length>>>0;if("[object Function]"!=_toString(d))throw new TypeError;for(;++q<l;)q in p&&d.call(e,p[q],q,b)},filter=function(b,d,e){if(Array.prototype.filter)return b.filter(d);var p=toObject(b);b=splitString&&"[object String]"==_toString(b)?b.split(""):p;var q=
b.length>>>0,l=[],a;if("[object Function]"!=_toString(d))throw new TypeError(d+" is not a function");for(var m=0;m<q;m++)m in b&&(a=b[m],d.call(e,a,m,p)&&l.push(a));return l},every=function(b,d,e){if(Array.prototype.every)return b.every(d,e);var p=toObject(b);b=splitString&&"[object String]"==_toString(b)?b.split(""):p;var q=b.length>>>0;if("[object Function]"!=_toString(d))throw new TypeError(d+" is not a function");for(var l=0;l<q;l++)if(l in b&&!d.call(e,b[l],l,p))return!1;return!0},some=function(b,
d,e){if(Array.prototype.some)return b.some(d,e);var p=toObject(b);b=splitString&&"[object String]"==_toString(b)?b.split(""):p;var q=b.length>>>0;if("[object Function]"!=_toString(d))throw new TypeError(d+" is not a function");for(var l=0;l<q;l++)if(l in b&&d.call(e,b[l],l,p))return!0;return!1},indexOf=function(b,d){var e=arguments[2];if(Array.prototype.indexOf)return b.indexOf(d,e);var p=splitString&&"[object String]"==_toString(b)?b.split(""):toObject(b),q=p.length>>>0;if(!q)return-1;var l=0;2<
arguments.length&&(l=toInteger(e));for(l=0<=l?l:Math.max(0,q+l);l<q;l++)if(l in p&&p[l]===d)return l;return-1},keys=function(b){if(Object.keys)return Object.keys(b);var d=!0,e="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),p=e.length,q;for(q in{toString:null})d=!1;if("object"!=typeof b&&"function"!=typeof b||null===b)throw new TypeError("Object.keys called on a non-object");q=[];for(var l in b)owns(b,l)&&q.push(l);if(d)for(d=0;d<p;d++)l=
e[d],owns(b,l)&&q.push(l);return q},toObject=function(b){if(null==b)throw new TypeError("can't convert "+b+" to object");return Object(b)},prototypeOfObject=Object.prototype,_toString=function(b){return prototypeOfObject.toString.apply(b)},owns=function(b,d){return prototypeOfObject.hasOwnProperty.call(b,d)},create=function(b){if(Object.create)return Object.create(b);var d=function(){};if(1!=arguments.length)throw Error("Object.create implementation only accepts one parameter.");d.prototype=b;return new d};var ASSERT=!0,assert=function(){return ASSERT?function(b,d,e){void 0===d&&(d="failed!");if(!b)throw b=Error(d),b.location=e?e:Assert.location,b;}:function(){}}(),message=function(b,d){var e=Assert.messages[b];d&&forEach(d,function(b,d){e=e.replace("%"+(d+1),b)});return b+": "+e},reserveCodeRange=function(b,d,e){assert(b<=d,"Invalid code range");var p=every(Assert.reservedCodes,function(e){return d<e.first||b>e.last});assert(p,"Conflicting request for error code range");Assert.reservedCodes.push({first:b,
last:d,name:e})},setLocation=function(b){Assert.location=b},clearLocation=function(){Assert.location=null},setCounter=function(b,d){Assert.count=b;Assert.countMessage=d?d:"ERROR count exceeded"},checkCounter=function(){var b=Assert.count;"number"!==typeof b||isNaN(b)?assert(!1,"ERROR counter not set"):assert(Assert.count--,Assert.countMessage)},Assert={assert:assert,message:message,messages:{},reserveCodeRange:reserveCodeRange,reservedCodes:[],setLocation:setLocation,clearLocation:clearLocation,setCounter:setCounter,
checkCounter:checkCounter};var TRACE=!1,global=this,trace=function(){return TRACE?function(b){if(global.console&&global.console.log)console.log(b);else if(global.print)print(b);else throw"No trace function defined!";}:function(){}}();var Ast=function(){function b(){}function d(b){void 0===b&&(b=this);return b.op&&b.args}var e=["unused"],p={};b.clearPool=function(){e=["unused"];p={}};b.prototype.create=function l(b,m){var d=l(this);"string"===typeof b?(d.op=b,d.args=m instanceof Array?m:[]):null!==b&&"object"===typeof b&&forEach(keys(b),function(m,l){d[m]=b[m]});return d};b.prototype.arg=function(b){if(!d(this))throw"Malformed node";this.args.push(b);return this};b.prototype.argN=function(b,a){if(!d(this))throw"Malformed node";
if(void 0===a)return this.args[b];this.args[b]=a;return this};b.prototype.args=function(b){if(!d(this))throw"Malformed node";if(void 0===b)return this.args;this.args=b;return this};b.prototype.isNode=d;b.intern=b.prototype.intern=function a(m){this instanceof b&&void 0===m&&d(this)&&(m=this);assert("object"===typeof m,"node not an object");for(var G=m.op,s=m.args.length,ba="",M=[],A=0;A<s;A++)ba="string"===typeof m.args[A]?ba+(M[A]=m.args[A]):ba+(M[A]=a(m.args[A]));m=G+s+ba;s=p[m];void 0===s&&(e.push({op:G,
args:M}),s=e.length-1,p[m]=s);return s};b.node=b.prototype.node=function(b){b=JSON.parse(JSON.stringify(e[b]));for(var d=0;d<b.args.length;d++)"string"!==typeof b.args[d]&&(b.args[d]=this.node(b.args[d]));return b};b.dumpAll=b.prototype.dumpAll=function(){var a="";forEach(e,function(d,e){a+="\n"+e+": "+b.dump(d)});return a};b.dump=b.prototype.dump=function m(b){if("string"===typeof b)var d='"'+b+'"';else if("number"===typeof b)d=b;else{for(var d='{ op: "'+b.op+'", args: [ ',e=0;e<b.args.length;e++)0<
e&&(d+=" , "),d+=m(b.args[e]);d+=" ] }"}return d};return b}();var Model=function(){function b(){}function d(){return!!b.env.Au}b.fn={};b.env=p={};var e=[],p={};b.pushEnv=function(a){e.push(p);b.env=p=a};b.popEnv=function(){assert(0<e.length,"Empty envStack");b.env=p=e.pop()};var q=b.prototype=new Ast;Assert.reserveCodeRange(1E3,1999,"model");Assert.messages[1001]="Invalid syntax. '%1' expected, '%2' found.";Assert.messages[1002]="Only one decimal separator can be specified.";Assert.messages[1003]="Extra characters in input at position: %1, lexeme: %2.";Assert.messages[1004]=
"Invalid character '%1' (%2) in input.";Assert.messages[1005]="Misplaced thousands separator.";Assert.messages[1006]="Unexpected expression: %1";Assert.messages[1007]="Unexpected character: '%1' in '%2'.";Assert.messages[1008]="The same character '%1' is being used as a thousands and decimal separators.";Assert.messages[1009]="Missing argument for '%1' command.";var l=Assert.message;b.create=q.create=function M(a,d){assert(void 0!=a,"Model.create() called with invalid argument "+a);if(a instanceof
b)return d&&(a.location=d),a;var m;if(a instanceof Array)return m=[],forEach(a,function(b){m.push(M(b,d))}),m;if(!(this instanceof b))return(new b).create(a,d);m=M(this);m.location=d;a="string"===typeof a?s(a,b.env).expr():JSON.parse(JSON.stringify(a));forEach(keys(b.fn),function(a,d){q.hasOwnProperty(a)||(q[a]=function(){var d=b.fn[a];if(1<arguments.length&&arguments[1]instanceof b)return d.apply(this,arguments);for(var m=[this],l=0;l<arguments.length;l++)m.push(arguments[l]);return d.apply(this,
m)})});forEach(keys(a),function(b,d){m[b]=a[b]});return m};b.fromLaTex=q.fromLaTex=function(a){assert("string"===typeof a,"Model.prototype.fromLaTex");return this?this.create(a):b.create(a)};q.toLaTex=function(b){return G(b)};var a={ADD:"+",SUB:"-",MUL:"times",DIV:"div",FRAC:"frac",EQL:"=",ATAN2:"atan2",SQRT:"sqrt",VEC:"vec",PM:"pm",SIN:"sin",COS:"cos",TAN:"tan",SEC:"sec",COT:"cot",CSC:"csc",ARCSIN:"arcsin",ARCCOS:"arccos",ARCTAN:"arctan",LOG:"log",LN:"ln",LG:"lg",VAR:"var",NUM:"num",CST:"cst",COMMA:",",
POW:"^",SUBSCRIPT:"_",ABS:"abs",PAREN:"()",HIGHLIGHT:"hi",LT:"lt",LE:"le",GT:"gt",GE:"ge",NE:"ne",APPROX:"approx",INTERVAL:"interval",LIST:"list",EXISTS:"exists",IN:"in",FORALL:"forall",LIM:"lim",EXP:"exp",TO:"to",SUM:"sum",INT:"int",PROD:"prod",PERCENT:"%",M:"M",RIGHTARROW:"->",FACT:"fact",BINOM:"binom",ROW:"row",COL:"col",COLON:"colon",MATRIX:"matrix",FORMAT:"format",OVERSET:"overset",UNDERSET:"underset",OVERLINE:"overline",DEGREE:"degree",BACKSLASH:"backslash",MATHBF:"mathbf",NONE:"none"};forEach(keys(a),
function(d,m){b[d]=a[d]});var m={};m[a.ADD]="+";m[a.SUB]="-";m[a.MUL]="\\times";m[a.DIV]="\\div";m[a.FRAC]="\\frac";m[a.EQL]="=";m[a.ATAN2]="\\atan2";m[a.POW]="^";m[a.SUBSCRIPT]="_";m[a.PM]="\\pm";m[a.SIN]="\\sin";m[a.COS]="\\cos";m[a.TAN]="\\tan";m[a.ARCSIN]="\\arcsin";m[a.ARCCOS]="\\arccos";m[a.ARCTAN]="\\arctan";m[a.SEC]="\\sec";m[a.COT]="\\cot";m[a.CSC]="\\csc";m[a.LN]="\\ln";m[a.COMMA]=",";m[a.M]="\\M";m[a.BINOM]="\\binom";m[a.COLON]="\\colon";b.fold=function A(b,d){var g=[],m;forEach(b.args,
function(b){g.push(A(b,d))});b.args=g;switch(b.op){case a.VAR:if(m=d[b.args[0]])b=m}return b};var G=function ib(b){var d="";if("string"===typeof b)d=b;else if("number"===typeof b)d=b;else if("object"===typeof b){for(var l=[],e=0;e<b.args.length;e++)l[e]=ib(b.args[e]);switch(b.op){case a.VAR:case a.CST:case a.NUM:d=b.args[0];break;case a.SUB:d=1===b.args.length?m[b.op]+" "+l[0]:l[0]+" "+m[b.op]+" "+l[1];break;case a.DIV:case a.PM:case a.EQL:d=l[0]+" "+m[b.op]+" "+l[1];break;case a.POW:var e=b.args[0],
p=b.args[1];if(e.args&&2===e.args.length||p.args&&2===p.args.length)if(e.op===a.ADD||e.op===a.SUB||e.op===a.MUL||e.op===a.DIV||e.op===a.SQRT)l[0]=" ("+l[0]+") ";d="{"+l[0]+"^{"+l[1]+"}}";break;case a.SIN:case a.COS:case a.TAN:case a.ARCSIN:case a.ARCCOS:case a.ARCTAN:case a.SEC:case a.COT:case a.CSC:case a.LN:case a.M:d="{"+m[b.op]+"{"+l[0]+"}}";break;case a.FRAC:d="\\dfrac{"+l[0]+"}{"+l[1]+"}";break;case a.BINOM:d="\\binom{"+l[0]+"}{"+l[1]+"}";break;case a.SQRT:switch(l.length){case 1:d="\\sqrt{"+
l[0]+"}";break;case 2:d="\\sqrt["+l[0]+"]{"+l[1]+"}"}break;case a.VEC:d="\\vec{"+l[0]+"}";break;case a.MUL:var q,d="";forEach(b.args,function(e,p){if(e.args&&2<=e.args.length){if(e.op===a.ADD||e.op===a.SUB)l[p]="("+l[p]+")";0!==p&&"number"===typeof e&&(d+=m[b.op]+" ")}else e.op===a.PAREN||e.op===a.VAR||e.op===a.CST||"number"===typeof q&&"number"!==typeof e||0!==p&&(d+=" "+m[b.op]+" ");d+=l[p];q=e});break;case a.ADD:case a.COMMA:forEach(l,function(a,l){d=0===l?a:d+" "+m[b.op]+" "+a});break;default:assert(!1,
"unimplemented eval operator")}}else assert(!1,"invalid expression type");return d},s=function(m,e){function g(b,a){return{op:b,args:a}}function p(c,a){if(b.option("allowThousandsSeparator")){var d=b.option("setThousandsSeparator");if(!d)return","===c?c:"";if(c===a||!a&&0<=d.indexOf(c))return c}return""}function q(){var c=b.option("setDecimalSeparator"),a=b.option("setThousandsSeparator");if("string"===typeof c)return assert(1===c.length,l(1002)),a instanceof Array&&0<=a.indexOf(c)?(assert(!1,l(2008,
[c])),"."):c;a instanceof Array&&0<=a.indexOf(".")&&assert(!1,l(2008));return"."}function s(c,a,d){var m=b.option("ignoreTrailingZeros"),h=c.toString(),f="",e,g,n,k=0,R="integer",r,t;"."===c&&assert(!1,l(1004,[c,c.charCodeAt(0)]));for(c=0;c<h.length;c++)p(e=h.charAt(c))?((k&&g!==c-4||!k&&4<c)&&assert(!1,l(1005)),g=c,k++):(e===q()?(e=".","decimal"===R&&assert(!1,l(1007,[q(),f+q()])),R="decimal",k&&g!==c-4&&assert(!1,l(1005)),"0"===f&&(r=!0),n=c-1):"decimal"===R&&"0"!==e&&(n=c-k),f+=e);"decimal"!==
R&&g&&g!==c-4&&assert(!1,l(1005));void 0!==n&&(n+1<f.length&&(t=!0),m&&(f=f.substring(0,n+1)));f=new BigDecimal(f);a&&(a=option("decimalPlaces"),!d||f.scale()>a)&&(f=f.setScale(a,BigDecimal.ROUND_HALF_UP));return{op:b.NUM,args:[String(f)],hasThousandsSeparator:0!==k,numberFormat:R,hasLeadingZero:r,hasTrailingZero:t}}function H(c,a){return u(b.MUL,c,a)}function w(b,a){assert(1===a.length,"Wrong number of arguments for unary node");return g(b,a)}function u(b,a,d){assert(1<a.length,"Too few argument for binary node");
var f=[];forEach(a,function(a){d&&a.op===b?f=f.concat(a.args):f.push(a)});return g(b,f)}function v(){return N.lexeme()}function n(b){k=S;S=T;k===T&&(k=N.start(b))}function G(b){S===T&&(S=N.start(b));return S}function r(b,a){var d=k;if(d!==b){var f=String.fromCharCode(b),d=d?String.fromCharCode(d):"EOS";assert(!1,l(1001,[f,d]))}n(a)}function x(){var c,a;switch(a=k){case 65:case 97:case B:c=[v()];n();k===I&&(n({oneCharToken:!0}),c.push(x()));c=g(b.VAR,c);d()&&k===C&&G()===z&&(r(C),r(z));break;case na:c=
s(v());n();break;case ca:case U:var e;r(a);k===J||k===K?(r(a===U?J:K),c=g(b.COMMA,[])):(c=O(),b.option("allowInterval")?r(e=k===J?J:K):r(e=a===U?J:K));c.lbrk=a;c.rbrk=e;!b.option("allowInterval")||2!==c.args.length||a!==U&&a!==ca||e!==J&&e!==K?c.op===b.COMMA&&(c.op=b.LIST):c.op=b.INTERVAL;break;case C:c=t();break;case Za:n();a=t();e=[];for(e.push($a());k===V;)n(),e.push($a());e=g(f[V],e);r(oa);t();0<=a.args[0].indexOf("matrix")?c=g(b.MATRIX,[e]):assert(!1,"Unrecognized LaTeX name");break;case E:r(E);
a=W();r(E);c=w(b.ABS,[a]);break;case da:n();c=t();e=t();c=g(b.FRAC,[c,e]);c.isFraction=!0;break;case pa:n();c=t();e=t();a=w(b.FACT,[c]);c=u(b.POW,[u(b.MUL,[w(b.FACT,[e]),w(b.FACT,[u(b.ADD,[c,ea(e)])])]),P]);c=u(b.MUL,[a,c]);c.isBinomial=!0;break;case qa:n();switch(k){case ca:r(ca);a=O();r(K);c=t();c=g(b.POW,[c,g(b.POW,[a,P])]);break;case C:c=t();c=g(b.POW,[c,g(b.POW,[g(b.NUM,["2"]),P])]);break;default:assert(!1,l(1001,["{ or (",String.fromCharCode(k)]))}break;case ra:n();a=t();c=g(b.VEC,[a]);break;
case sa:case ta:case ua:n();for(c=[];k===L;)n({oneCharToken:!0}),c.push(y());1===c.length&&c[0].op===b.NUM&&"-1"===c[0].args[0]?(a="arc"+f[a],c=[]):a=f[a];c.unshift(g(a,[x()]));return 1<c.length?g(b.POW,c):c[0];case va:case wa:case xa:case ya:case za:case Aa:n();for(c=[];k===L;)n({oneCharToken:!0}),c.push(y());c.unshift(g(f[a],[x()]));return 1<c.length?g(b.POW,c):c[0];case Ba:return n(),g(b.LOG,[g(b.VAR,["e"]),x()]);case Ca:return n(),g(b.LOG,[g(b.NUM,["10"]),x()]);case Da:return n(),c=[],k===I?(n({oneCharToken:!0}),
c.push(x())):c.push(g(b.VAR,["e"])),c.push(x()),g(b.LOG,c);case Ea:return n(),c=[],r(I),c.push(x()),c.push(x()),g(f[a],c);case Fa:case Ga:case Ha:return n(),c=[],k===I&&(n({oneCharToken:!0}),c.push(x()),r(L,{oneCharToken:!0}),c.push(x())),c.push(O()),g(f[a],c);case Ia:return n(),g(b.EXISTS,[X()]);case Ja:return n(),g(b.FORALL,[O()]);case Ka:return n(),g(b.EXP,[W()]);case ab:return n(),g(b.M,[La()]);case Ma:return n(),g(b.FORMAT,[t()]);case Na:return n(),g(b.OVERLINE,[t()]);case Oa:case Pa:return n(),
c=t(),e=t(),e.args.push(g(f[a],[c])),e;case Qa:n();c=t();break;default:assert(!1,l(1006,[v()])),c=void 0}return c}function $a(){var b=[];for(b.push(X());k===Y;)n(),b.push(X());return g(f[Y],b)}function t(){var c;r(C);k===z?(r(z),c=g(b.COMMA,[])):(c=O(),r(z));c.lbrk=C;c.rbrk=z;return c}function bb(){var c,a;for(c=[x()];(a=k)===L;){n({oneCharToken:!0});var e;e=c[0];e=e.op!==b.VAR?!1:(e=b.env[e.args[0]])&&e.name?!0:!1;!e&&!d()||(a=k)!==F&&a!==D?(a=y(),a.op===b.VAR&&"\\circ"===a.args[0]&&(k===B&&"K"===
v()||"C"===v()||"F"===v()?(a=H([c.pop(),w(b.VAR,["\\degree "+v()])]),n()):a=H([c.pop(),w(b.VAR,["\\degree"])])),c.push(a)):(n(),c.push(w(f[a],[fa])))}a=1<c.length?g(b.POW,c):c[0];switch(c=k){case cb:n();a=g(b.PERCENT,[a]);break;case db:n();a=g(b.FACT,[a]);break;default:c===B&&"\\degree"===v()?(n(),k!==B||"K"!==v()&&"C"!==v()&&"F"!==v()?a=H([a,w(b.VAR,["\\degree"])]):(a=H([a,w(b.VAR,["\\degree "+v()])]),n())):!d()||c!==F&&c!==D||G()!==z||(n(),a=w(f[c],[a]))}return a}function y(){var c,a;switch(c=k){case F:n();
a=y();break;case D:n();a=ea(y());break;case Z:n();a=y();a=g(f[c],[a]);break;case I:var d=f[c];n({oneCharToken:!0});(c=k)===F||c===D?(n(),a=fa):a=y();a=g(d,[a]);k===L&&(d=f[c],n({oneCharToken:!0}),(c=k)===F||c===D?(n(),a=fa):a=y(),a=g(d,[a]));break;case L:d=f[c];n({oneCharToken:!0});(c=k)===F||c===D?(n(),a=fa):a=y();a=g(d,[a]);break;default:c===B&&"$"===v()?(n(),a=k?H([g(b.VAR,["$"]),bb()]):g(b.VAR,["$"])):a=bb()}return a}function eb(){var c=[y()];k===I&&(n({oneCharToken:!0}),c.push(y()),d()&&k===
C&&(r(C),r(z)));return 1<c.length?g(b.SUBSCRIPT,c):c[0]}function fb(){for(var c=eb();k===Ra;)n(),c=g(b.FRAC,[c,eb()]),c.isFraction=!0;return c}function La(){var c,a,e=!1,f=[];a=fb();for(f=a.op!==b.MUL||a.isBinomial?[a]:a.args;(c=k)&&!gb(c)&&!Sa(c)&&c!==ga&&!Ta(c)&&c!==z&&c!==J&&c!==K&&c!==Q&&c!==$&&c!==E&&c!==V&&c!==Y&&c!==oa;){e=!1;if(c===aa||c===ha||c===Ra)n(),e=!0;a=fb();c===ha&&(a=g(b.POW,[a,P]));var h;if(h=d())if(h=c===U)h=f[f.length-1],assert(!0,"Internal error in 'isVar()'"),h=h.op!==b.VAR?
!1:void 0===h?!0:"M"===h.args[0];if(h)f.pop(),a=w(b.M,[a]);else{if(h=!e)if(h=0<f.length)h=[f[f.length-1],a],h=h[0].lbrk||h[1].lbrk||h[0].op!==b.NUM||h[1].op!==b.FRAC||"integer"!==h[0].numberFormat||h[1].args[0].op!==b.NUM||"integer"!==h[1].args[0].numberFormat||h[1].args[1].op!==b.NUM||"integer"!==h[1].args[1].numberFormat?!1:!0;if(h)c=f.pop(),Ua(c)&&(a=u(b.MUL,[P,a])),a=u(b.ADD,[c,a]),a.isMixedFraction=!0;else{if(h=!e)if(h=0<f.length)h=[f[f.length-1],a],h=h[0].lbrk||h[1].lbrk||h[0].op!==b.NUM||"decimal"!==
h[0].numberFormat||h[1].op!==b.OVERLINE?!1:!0;if(h)e=f.pop(),a=a.args[0],a=s("."+a.args[0]),a.isRepeating=!0,0<=e.args[0].indexOf(".")&&(h=e.args[0].length-e.args[0].indexOf(".")-1,a=H([a,u(b.POW,[s("10"),s("-"+h)])])),a=u(b.ADD,[e,a]),a.numberFormat="decimal",a.isRepeating=!0;else{if(h=c===aa)if(h=0<f.length)e&&(h=[f[f.length-1],a],1===h.length?e=h[0].op===b.NUM&&(1===h[0].args[0].length||1===h[0].args[0].indexOf(q()))||h[0].op===b.POW&&h[0].args[0].op===b.NUM&&"10"===h[0].args[0].args[0]&&"integer"===
h[0].args[1].numberFormat?!0:!1:2===h.length?(e=h[0],h=h[1],e=e.op!==b.NUM||1!==e.args[0].length&&1!==e.args[0].indexOf(q())||h.op!==b.POW||h.args[0].op!==b.NUM||"10"!==h.args[0].args[0]||"integer"!==h.args[1].numberFormat?!1:!0):e=void 0),h=e;h&&(c=f.pop(),Ua(c)&&(a=u(b.MUL,[P,a])),a=u(b.MUL,[c,a]),a.isScientific=!0)}}}a.op!==b.MUL||a.isScientific||a.isBinomial?f.push(a):f=f.concat(a.args)}return 1<f.length?H(f):f[0]}function Ua(c){if("number"===typeof c)return 0>c;if(1===c.args.length)return c.op===
a.SUB&&0<c.args[0].args[0]||c.op===b.NUM&&0>+c.args[0];if(2===c.args.length)return c.op===a.MUL&&Ua(c.args[0])}function ea(a){if("number"===typeof a)return-a;if(a.op===b.NUM){if("-"!==a.args[0].charAt(0))return s("-"+a.args[0])}else if(a.op===b.MUL)return a.args.unshift(ea(a.args.shift())),a;return w(b.SUB,[a])}function gb(b){return b===F||b===D||b===Z||b===ia}function W(){for(var a=La(),d;gb(d=k);){n();var e=La();switch(d){case ia:a=u(b.BACKSLASH,[a,e]);break;case Z:a=u(b.PM,[a,e]);break;case D:e=
ea(e);default:a=u(b.ADD,[a,e],!0)}}return a}function Sa(a){return a===$||a===ja||a===ka||a===la||a===Va||a===Wa||a===Xa}function Ta(a){return a===hb||a===ma||a===Ya}function X(){var a;if(Ta(k))a=g(b.VAR,["_"]);else{a=k;for(var d=Sa(a)?g(b.VAR,["_"]):W(),e=[];Sa(a=k);){n();var l=0===k?g(b.VAR,["_"]):W(),d=g(f[a],[d,l]);e.push(d);d=l}a=0===e.length?d:1===e.length?e[0]:g(b.COMMA,e)}for(var h,d=[];Ta(h=k)||h===Q;)n(),e=0===k?g(b.VAR,["_"]):W(),a=g(f[h],[a,e]),d.push(a),a=e;return 0===d.length?a:1===d.length?
d[0]:g(b.COMMA,d)}function O(){for(var a=X(),b=[a];k===ga;)n(),b.push(X());return 1<b.length?g(f[ga],b):a}var T=0,F=43,L=94,I=95,ta=261,za=264,Aa=265,da=256,Ra=47,hb=61,Ba=263,C=123,E=124,ca=91,U=40,aa=42,na=48,Z=258,z=125,K=93,J=41,ya=262,sa=259,qa=257,D=45,ua=260,B=97,ga=44,Ca=267,Da=268,$=270,ja=271,ka=272,la=273,Ia=274,Va=275,Ja=276,Ea=277,Ka=278,Wa=279,Fa=280,Ga=281,Ha=282,cb=37,ab=283,Q=284,db=33,pa=285,V=286,Y=287,Za=288,oa=289,Xa=58,ra=290,va=291,wa=292,xa=293,ha=294,Ma=295,Na=296,Oa=297,
Pa=298,ia=299,Qa=300,ma=301,Ya=302,k=T,S=T,f={};f[Ra]=a.FRAC;f[da]=a.FRAC;f[qa]=a.SQRT;f[ra]=a.VEC;f[F]=a.ADD;f[D]=a.SUB;f[Z]=a.PM;f[L]=a.POW;f[I]=a.SUBSCRIPT;f[aa]=a.MUL;f[ha]=a.DIV;f[sa]=a.SIN;f[ta]=a.COS;f[ua]=a.TAN;f[va]=a.ARCSIN;f[wa]=a.ARCCOS;f[xa]=a.ARCTAN;f[ya]=a.SEC;f[za]=a.COT;f[Aa]=a.CSC;f[Ba]=a.LN;f[Ca]=a.LG;f[Da]=a.LOG;f[hb]=a.EQL;f[ga]=a.COMMA;f[269]=a.TEXT;f[$]=a.LT;f[ja]=a.LE;f[ka]=a.GT;f[la]=a.GE;f[ma]=a.NE;f[Ya]=a.APPROX;f[Ia]=a.EXISTS;f[Va]=a.IN;f[Ja]=a.FORALL;f[Ea]=a.LIM;f[Ka]=
a.EXP;f[Wa]=a.TO;f[Fa]=a.SUM;f[Ga]=a.INT;f[Ha]=a.PROD;f[ab]=a.M;f[Q]=a.RIGHTARROW;f[db]=a.FACT;f[pa]=a.BINOM;f[V]=a.ROW;f[Y]=a.COL;f[Xa]=a.COLON;f[Ma]=a.FORMAT;f[Na]=a.OVERLINE;f[Oa]=a.OVERSET;f[Pa]=a.UNDERSET;f[ia]=a.BACKSLASH;f[Qa]=a.MATHBF;var fa=s("1"),P=s("-1"),jb=g(b.NONE,[s("0")]),N=function(a){function d(a){return 65<=a&&90>=a||97<=a&&122>=a}function f(a){return 48<=a&&57>=a}function m(b){var e=String.fromCharCode(b);for(g+=e;d(b)||39===b;){b=a.charCodeAt(h++);var e=String.fromCharCode(b),
f=g+e;if(!some(k,function(a){return 0===a.indexOf(f)}))break;g+=e}for(;39===b;)b=a.charCodeAt(h++),e=String.fromCharCode(b),g+=e;h--;return B}var h=0,g="",n={"\\cdot":aa,"\\times":aa,"\\div":ha,"\\dfrac":da,"\\frac":da,"\\sqrt":qa,"\\vec":ra,"\\pm":Z,"\\sin":sa,"\\cos":ta,"\\tan":ua,"\\sec":ya,"\\cot":za,"\\csc":Aa,"\\arcsin":va,"\\arccos":wa,"\\arctan":xa,"\\ln":Ba,"\\lg":Ca,"\\log":Da,"\\left":null,"\\right":null,"\\big":null,"\\Big":null,"\\bigg":null,"\\Bigg":null,"\\ ":null,"\\quad":null,"\\qquad":null,
"\\text":269,"\\textrm":269,"\\textit":269,"\\textbf":269,"\\lt":$,"\\le":ja,"\\gt":ka,"\\ge":la,"\\ne":ma,"\\approx":Ya,"\\exists":Ia,"\\in":Va,"\\forall":Ja,"\\lim":Ea,"\\exp":Ka,"\\to":Wa,"\\sum":Fa,"\\int":Ga,"\\prod":Ha,"\\%":cb,"\\rightarrow":Q,"\\longrightarrow":Q,"\\binom":pa,"\\begin":Za,"\\end":oa,"\\colon":Xa,"\\vert":E,"\\lvert":E,"\\rvert":E,"\\mid":E,"\\format":Ma,"\\overline":Na,"\\overset":Oa,"\\underset":Pa,"\\backslash":ia,"\\mathbf":Qa},k=keys(e),r;return{start:function(e){e||(e=
{});var k;for(g="";h<a.length;)switch(k=a.charCodeAt(h++)){case 32:case 9:case 10:case 13:continue;case 38:if(0===a.substring(h).indexOf("nbsp;")){h+=5;continue}return Y;case 92:g+=String.fromCharCode(k);switch(a.charCodeAt(h)){case 92:return h++,V;case 123:case 124:case 125:return a.charCodeAt(h++)}k=a.charCodeAt(h++);if(36===k)g=String.fromCharCode(k);else if(37===k)g+=String.fromCharCode(k);else if(0<=[32,58,59,44,33].indexOf(k))g="\\ ";else{for(;d(k);)g+=String.fromCharCode(k),k=a.charCodeAt(h++);
h--}k=n[g];if(void 0===k)k=B;else if(269===k){for(k=a.charCodeAt(h++);k&&123!==k;)k=a.charCodeAt(h++);g="";for(k=a.charCodeAt(h++);k&&125!==k;)k=String.fromCharCode(k),"&"===k&&0===a.substring(h).indexOf("nbsp;")?h+=5:" "!==k&&"\t"!==k&&(g+=k),k=a.charCodeAt(h++);assert(""!==g,l(1009,["\\text"]));k=b.option("ignoreText")?null:B}if(null!==k)return k;g="";continue;case 45:if(62===a.charCodeAt(h))return h++,Q;case 33:return 61===a.charCodeAt(h)?(h++,ma):k;case 37:case 40:case 41:case 42:case 43:case 44:case 47:case 58:case 61:case 91:case 93:case 94:case 95:case 123:case 124:case 125:return g+=
String.fromCharCode(k),k;case 36:return g+=String.fromCharCode(k),B;case 60:return 61===a.charCodeAt(h)?(h++,ja):$;case 62:return 61===a.charCodeAt(h)?(h++,la):ka;default:if(d(k)||39===k)return m(k);if(String.fromCharCode(k)===q()||f(k)){if(e.oneCharToken)return g+=String.fromCharCode(k),na;for(e=k;f(e)||q()===String.fromCharCode(e)||(r=p(String.fromCharCode(e),r))&&f(a.charCodeAt(h+1));)g+=String.fromCharCode(e),e=a.charCodeAt(h++),92===e&&32===a.charCodeAt(h)&&(e=32,h++);"."===g&&0===indexOf(a.substring(h),
"overline")&&(g="0.");h--;return na}assert(!1,l(1004,[String.fromCharCode(k),k]));return 0}return 0},lexeme:function(){return g},pos:function(){return h}}}(m);return{expr:function(){if(k=N.start(void 0)){var a=O();a.op!==b.COMMA&&a.lbrk===C&&a.rbrk===z&&(a=g(b.COMMA,[a]));assert(!k,l(1003,[N.pos(),N.lexeme()]));return a}return jb}}};return b}();
