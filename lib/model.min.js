var boxedString=Object("a"),splitString="a"!=boxedString[0]||!(0 in boxedString),forEach=function(b,d,c){if(Array.prototype.forEach)return b.forEach(d);b=toObject(b);var q=splitString&&"[object String]"==_toString(b)?b.split(""):b,r=-1,g=q.length>>>0;if("[object Function]"!=_toString(d))throw new TypeError;for(;++r<g;)r in q&&d.call(c,q[r],r,b)},filter=function(b,d,c){if(Array.prototype.filter)return b.filter(d);var q=toObject(b);b=splitString&&"[object String]"==_toString(b)?b.split(""):q;var r=
b.length>>>0,g=[],a;if("[object Function]"!=_toString(d))throw new TypeError(d+" is not a function");for(var f=0;f<r;f++)f in b&&(a=b[f],d.call(c,a,f,q)&&g.push(a));return g},every=function(b,d,c){if(Array.prototype.every)return b.every(d,c);var q=toObject(b);b=splitString&&"[object String]"==_toString(b)?b.split(""):q;var r=b.length>>>0;if("[object Function]"!=_toString(d))throw new TypeError(d+" is not a function");for(var g=0;g<r;g++)if(g in b&&!d.call(c,b[g],g,q))return!1;return!0},some=function(b,
d,c){if(Array.prototype.some)return b.some(d,c);var q=toObject(b);b=splitString&&"[object String]"==_toString(b)?b.split(""):q;var r=b.length>>>0;if("[object Function]"!=_toString(d))throw new TypeError(d+" is not a function");for(var g=0;g<r;g++)if(g in b&&d.call(c,b[g],g,q))return!0;return!1},indexOf=function(b,d){var c=arguments[2];if(Array.prototype.indexOf)return b.indexOf(d,c);var q=splitString&&"[object String]"==_toString(b)?b.split(""):toObject(b),r=q.length>>>0;if(!r)return-1;var g=0;2<
arguments.length&&(g=toInteger(c));for(g=0<=g?g:Math.max(0,r+g);g<r;g++)if(g in q&&q[g]===d)return g;return-1},keys=function(b){if(Object.keys)return Object.keys(b);var d=!0,c="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),q=c.length,r;for(r in{toString:null})d=!1;if("object"!=typeof b&&"function"!=typeof b||null===b)throw new TypeError("Object.keys called on a non-object");r=[];for(var g in b)owns(b,g)&&r.push(g);if(d)for(d=0;d<q;d++)g=
c[d],owns(b,g)&&r.push(g);return r},toObject=function(b){if(null==b)throw new TypeError("can't convert "+b+" to object");return Object(b)},prototypeOfObject=Object.prototype,_toString=function(b){return prototypeOfObject.toString.apply(b)},owns=function(b,d){return prototypeOfObject.hasOwnProperty.call(b,d)},create=function(b){if(Object.create)return Object.create(b);var d=function(){};if(1!=arguments.length)throw Error("Object.create implementation only accepts one parameter.");d.prototype=b;return new d};var ASSERT=!0,assert=function(){return ASSERT?function(b,d){void 0===d&&(d="failed!");if(!b){var c=Error(d);c.location=Assert.location;throw c;}}:function(){}}(),message=function(b,d){var c=Assert.messages[b];d&&forEach(d,function(b,d){c=c.replace("%"+(d+1),b)});return b+": "+c},reserveCodeRange=function(b,d,c){assert(b<=d,"Invalid code range");var q=every(Assert.reservedCodes,function(c){return d<c.first||b>c.last});assert(q,"Conflicting request for error code range");Assert.reservedCodes.push({first:b,
last:d,name:c})},setLocation=function(b){Assert.location=b},clearLocation=function(){Assert.location=null},setCounter=function(b,d){Assert.count=b;Assert.countMessage=d?d:"ERROR count exceeded"},checkCounter=function(){var b=Assert.count;"number"!==typeof b||isNaN(b)?assert(!1,"ERROR counter not set"):assert(Assert.count--,Assert.countMessage)},Assert={assert:assert,message:message,messages:{},reserveCodeRange:reserveCodeRange,reservedCodes:[],setLocation:setLocation,clearLocation:clearLocation,setCounter:setCounter,
checkCounter:checkCounter};var TRACE=!1,global=this,trace=function(){return TRACE?function(b){if(global.console&&global.console.log)console.log(b);else if(global.print)print(b);else throw"No trace function defined!";}:function(){}}();var Ast=function(){function b(){}function d(b){void 0===b&&(b=this);return b.op&&b.args}var c=["unused"],q={};b.clearPool=function(){c=["unused"];q={}};b.prototype.create=function g(b,f){var d=g(this);"string"===typeof b?(d.op=b,d.args=f instanceof Array?f:[]):null!==b&&"object"===typeof b&&forEach(keys(b),function(f,g){d[f]=b[f]});return d};b.prototype.arg=function(b){if(!d(this))throw"Malformed node";this.args.push(b);return this};b.prototype.argN=function(b,a){if(!d(this))throw"Malformed node";
if(void 0===a)return this.args[b];this.args[b]=a;return this};b.prototype.args=function(b){if(!d(this))throw"Malformed node";if(void 0===b)return this.args;this.args=b;return this};b.prototype.isNode=d;b.intern=b.prototype.intern=function a(f){this instanceof b&&void 0===f&&d(this)&&(f=this);assert("object"===typeof f,"node not an object");for(var F=f.op,t=f.args.length,aa="",K=[],A=0;A<t;A++)aa="string"===typeof f.args[A]?aa+(K[A]=f.args[A]):aa+(K[A]=a(f.args[A]));f=F+t+aa;t=q[f];void 0===t&&(c.push({op:F,
args:K}),t=c.length-1,q[f]=t);return t};b.prototype.node=function(b){b=JSON.parse(JSON.stringify(c[b]));for(var d=0;d<b.args.length;d++)"string"!==typeof b.args[d]&&(b.args[d]=this.node(b.args[d]));return b};b.dumpAll=b.prototype.dumpAll=function(){var a="";forEach(c,function(d,c){a+="\n"+c+": "+b.dump(d)});return a};b.dump=b.prototype.dump=function f(b){if("string"===typeof b)var d='"'+b+'"';else if("number"===typeof b)d=b;else{for(var d='{ op: "'+b.op+'", args: [ ',c=0;c<b.args.length;c++)0<c&&
(d+=" , "),d+=f(b.args[c]);d+=" ] }"}return d};return b}();var Model=function(){function b(){}function d(){return!!b.env.Au}b.fn={};b.env=q={};var c=[],q={};b.pushEnv=function(a){c.push(q);b.env=q=a};b.popEnv=function(){assert(0<c.length,"Empty envStack");b.env=q=c.pop()};var r=b.prototype=new Ast;Assert.reserveCodeRange(1E3,1999,"model");Assert.messages[1001]="Invalid syntax. '%1' expected, '%2' found.";Assert.messages[1002]="Only one decimal separator can be specified.";Assert.messages[1003]="Extra characters in input at position: %1, lexeme: %2.";Assert.messages[1004]=
"Invalid character '%1' (%2) in input.";Assert.messages[1005]="Misplaced thousands separator.";Assert.messages[1006]="Unexpected expression: %1";Assert.messages[1007]="Unexpected character: '%1' in '%2'.";Assert.messages[1008]="The same character '%1' is being used as a thousands and decimal separators.";Assert.messages[1009]="Missing argument for '%1' command.";var g=Assert.message;b.create=r.create=function K(a,d){assert(void 0!=a,"Model.create() called with invalid argument "+a);if(a instanceof
b)return d&&(a.location=d),a;var f;if(a instanceof Array)return f=[],forEach(a,function(b){f.push(K(b,d))}),f;if(!(this instanceof b))return(new b).create(a,d);f=K(this);f.location=d;a="string"===typeof a?t(a,b.env).expr():JSON.parse(JSON.stringify(a));forEach(keys(b.fn),function(a,d){r.hasOwnProperty(a)||(r[a]=function(){var d=b.fn[a];if(1<arguments.length&&arguments[1]instanceof b)return d.apply(this,arguments);for(var f=[this],g=0;g<arguments.length;g++)f.push(arguments[g]);return d.apply(this,
f)})});forEach(keys(a),function(b,d){f[b]=a[b]});return f};b.fromLaTex=r.fromLaTex=function(a){assert("string"===typeof a,"Model.prototype.fromLaTex");return this?this.create(a):b.create(a)};r.toLaTex=function(b){return F(b)};var a={ADD:"+",SUB:"-",MUL:"times",DIV:"div",FRAC:"frac",EQL:"=",ATAN2:"atan2",SQRT:"sqrt",VEC:"vec",PM:"pm",SIN:"sin",COS:"cos",TAN:"tan",SEC:"sec",COT:"cot",CSC:"csc",ARCSIN:"arcsin",ARCCOS:"arccos",ARCTAN:"arctan",LOG:"log",LN:"ln",LG:"lg",VAR:"var",NUM:"num",CST:"cst",COMMA:",",
POW:"^",SUBSCRIPT:"_",ABS:"abs",PAREN:"()",HIGHLIGHT:"hi",LT:"lt",LE:"le",GT:"gt",GE:"ge",INTERVAL:"interval",LIST:"list",EXISTS:"exists",IN:"in",FORALL:"forall",LIM:"lim",EXP:"exp",TO:"to",SUM:"sum",INT:"int",PROD:"prod",PERCENT:"%",M:"M",RIGHTARROW:"->",FACT:"fact",BINOM:"binom",ROW:"row",COL:"col",COLON:"colon",MATRIX:"matrix",FORMAT:"format",OVERSET:"overset",UNDERSET:"underset",OVERLINE:"overline",DEGREE:"degree",BACKSLASH:"backslash",MATHBF:"mathbf",NONE:"none"};forEach(keys(a),function(d,f){b[d]=
a[d]});var f={};f[a.ADD]="+";f[a.SUB]="-";f[a.MUL]="\\times";f[a.DIV]="\\div";f[a.FRAC]="\\frac";f[a.EQL]="=";f[a.ATAN2]="\\atan2";f[a.POW]="^";f[a.SUBSCRIPT]="_";f[a.PM]="\\pm";f[a.SIN]="\\sin";f[a.COS]="\\cos";f[a.TAN]="\\tan";f[a.ARCSIN]="\\arcsin";f[a.ARCCOS]="\\arccos";f[a.ARCTAN]="\\arctan";f[a.SEC]="\\sec";f[a.COT]="\\cot";f[a.CSC]="\\csc";f[a.LN]="\\ln";f[a.COMMA]=",";f[a.M]="\\M";f[a.BINOM]="\\binom";f[a.COLON]="\\colon";b.fold=function A(b,d){var m=[],f;forEach(b.args,function(b){m.push(A(b,
d))});b.args=m;switch(b.op){case a.VAR:if(f=d[b.args[0]])b=f}return b};var F=function fb(b){var d="";if("string"===typeof b)d=b;else if("number"===typeof b)d=b;else if("object"===typeof b){for(var g=[],c=0;c<b.args.length;c++)g[c]=fb(b.args[c]);switch(b.op){case a.VAR:case a.CST:case a.NUM:d=b.args[0];break;case a.SUB:d=1===b.args.length?f[b.op]+" "+g[0]:g[0]+" "+f[b.op]+" "+g[1];break;case a.DIV:case a.PM:case a.EQL:d=g[0]+" "+f[b.op]+" "+g[1];break;case a.POW:var c=b.args[0],q=b.args[1];if(c.args&&
2===c.args.length||q.args&&2===q.args.length)if(c.op===a.ADD||c.op===a.SUB||c.op===a.MUL||c.op===a.DIV||c.op===a.SQRT)g[0]=" ("+g[0]+") ";d="{"+g[0]+"^{"+g[1]+"}}";break;case a.SIN:case a.COS:case a.TAN:case a.ARCSIN:case a.ARCCOS:case a.ARCTAN:case a.SEC:case a.COT:case a.CSC:case a.LN:case a.M:d="{"+f[b.op]+"{"+g[0]+"}}";break;case a.FRAC:d="\\dfrac{"+g[0]+"}{"+g[1]+"}";break;case a.BINOM:d="\\binom{"+g[0]+"}{"+g[1]+"}";break;case a.SQRT:switch(g.length){case 1:d="\\sqrt{"+g[0]+"}";break;case 2:d=
"\\sqrt["+g[0]+"]{"+g[1]+"}"}break;case a.VEC:d="\\vec{"+g[0]+"}";break;case a.MUL:var r,d="";forEach(b.args,function(c,q){if(c.args&&2<=c.args.length){if(c.op===a.ADD||c.op===a.SUB)g[q]="("+g[q]+")";0!==q&&"number"===typeof c&&(d+=f[b.op]+" ")}else c.op===a.PAREN||c.op===a.VAR||c.op===a.CST||"number"===typeof r&&"number"!==typeof c||0!==q&&(d+=" "+f[b.op]+" ");d+=g[q];r=c});break;case a.ADD:case a.COMMA:forEach(g,function(a,g){d=0===g?a:d+" "+f[b.op]+" "+a});break;default:assert(!1,"unimplemented eval operator")}}else assert(!1,
"invalid expression type");return d},t=function(f,c){function m(b,a){return{op:b,args:a}}function q(e,a){if(b.option("allowThousandsSeparator")){var d=b.option("setThousandsSeparator");if(!d)return","===e?e:"";if(e===a||!a&&0<=d.indexOf(e))return e}return""}function r(){var e=b.option("setDecimalSeparator"),a=b.option("setThousandsSeparator");if("string"===typeof e)return assert(1===e.length,g(1002)),a instanceof Array&&0<=a.indexOf(e)?(assert(!1,g(2008,[e])),"."):e;a instanceof Array&&0<=a.indexOf(".")&&
assert(!1,g(2008));return"."}function t(e,a,d){var f=b.option("ignoreTrailingZeros"),k=e.toString(),c="",l,m,h,p=!1,n="integer",s,u;"."===e&&assert(!1,g(1004,[e,e.charCodeAt(0)]));for(e=0;e<k.length;e++)q(l=k.charAt(e))?(p&&m!==e-4&&assert(!1,g(1005)),m=e,p=!0):(l===r()?(l=".","decimal"===n&&assert(!1,g(1007,[r(),c+r()])),n="decimal",p&&m!==e-4&&assert(!1,g(1005)),p=!1,"0"===c&&(s=!0),h=e-1):"decimal"===n&&"0"!==l&&(h=e),c+=l);p&&m!==e-4&&assert(!1,g(1005));void 0!==h&&(h+1<c.length&&(u=!0),f&&(c=
c.substring(0,h+1)));c=new BigDecimal(c);a&&(a=option("decimalPlaces"),!d||c.scale()>a)&&(c=c.setScale(a,BigDecimal.ROUND_HALF_UP));return{op:b.NUM,args:[String(c)],hasThousandsSeparator:p,numberFormat:n,hasLeadingZero:s,hasTrailingZero:u}}function G(e,a){return v(b.MUL,e,a)}function x(b,a){assert(1===a.length,"Wrong number of arguments for unary node");return m(b,a)}function v(b,a,d){assert(1<a.length,"Too few argument for binary node");var c=[];forEach(a,function(a){d&&a.op===b?c=c.concat(a.args):
c.push(a)});return m(b,c)}function w(){return L.lexeme()}function h(b){p=Q;Q=R;p===R&&(p=L.start(b))}function F(b){Q===R&&(Q=L.start(b));return Q}function s(b,a){var d=p;if(d!==b){var c=String.fromCharCode(b),d=d?String.fromCharCode(d):"EOS";assert(!1,g(1001,[c,d]))}h(a)}function y(){var e,a;switch(a=p){case 65:case 97:case B:e=[w()];h();p===H&&(h({oneCharToken:!0}),e.push(y()));e=m(b.VAR,e);d()&&p===I&&F()===M&&(s(I),s(M));break;case na:e=t(w());h();break;case ba:case ca:var c;s(a);e=N();b.option("allowInterval")?
s(c=p===S?S:T):s(c=a===ba?S:T);e.lbrk=a;e.rbrk=c;!b.option("allowInterval")||2!==e.args.length||a!==ba&&a!==ca||c!==S&&c!==T?e.op===b.COMMA&&(e.op=b.LIST):e.op=b.INTERVAL;break;case I:e=u();break;case Wa:h();a=u();c=[];for(c.push(Xa());p===U;)h(),c.push(Xa());c=m(l[U],c);s(oa);u();0<=a.args[0].indexOf("matrix")?e=m(b.MATRIX,[c]):assert(!1,"Unrecognized LaTeX name");break;case D:s(D);a=V();s(D);e=x(b.ABS,[a]);break;case da:h();e=u();c=u();e=m(b.FRAC,[e,c]);e.isFraction=!0;break;case pa:h();e=u();c=
u();a=x(b.FACT,[e]);e=v(b.POW,[v(b.MUL,[x(b.FACT,[c]),x(b.FACT,[v(b.ADD,[e,ea(c)])])]),O]);e=v(b.MUL,[a,e]);e.isBinomial=!0;break;case qa:h();switch(p){case ca:s(ca);a=N();s(T);e=u();e=m(b.POW,[e,m(b.POW,[a,O])]);break;case I:e=u();e=m(b.POW,[e,m(b.POW,[m(b.NUM,["2"]),O])]);break;default:assert(!1,g(1001,["{ or (",String.fromCharCode(p)]))}break;case ra:h();a=u();e=m(b.VEC,[a]);break;case sa:case ta:case ua:h();for(e=[];p===J;)h({oneCharToken:!0}),e.push(z());1===e.length&&e[0].op===b.NUM&&"-1"===
e[0].args[0]?(a="arc"+l[a],e=[]):a=l[a];e.unshift(m(a,[y()]));return 1<e.length?m(b.POW,e):e[0];case va:case wa:case xa:case ya:case za:case Aa:h();for(e=[];p===J;)h({oneCharToken:!0}),e.push(z());e.unshift(m(l[a],[y()]));return 1<e.length?m(b.POW,e):e[0];case Ba:return h(),m(b.LOG,[m(b.VAR,["e"]),y()]);case Ca:return h(),m(b.LOG,[m(b.NUM,["10"]),y()]);case Da:return h(),e=[],p===H?(h({oneCharToken:!0}),e.push(y())):e.push(m(b.VAR,["e"])),e.push(y()),m(b.LOG,e);case Ea:return h(),e=[],s(H),e.push(y()),
e.push(y()),m(l[a],e);case Fa:case Ga:case Ha:return h(),e=[],p===H&&(h({oneCharToken:!0}),e.push(y()),s(J,{oneCharToken:!0}),e.push(y())),e.push(N()),m(l[a],e);case Ia:return h(),m(b.EXISTS,[W()]);case Ja:return h(),m(b.FORALL,[N()]);case Ka:return h(),m(b.EXP,[V()]);case Ya:return h(),m(b.M,[La()]);case Ma:return h(),m(b.FORMAT,[u()]);case Na:return h(),m(b.OVERLINE,[u()]);case Oa:case Pa:return h(),e=u(),c=u(),c.args.push(m(l[a],[e])),c;case Qa:h();e=u();break;default:assert(!1,g(1006,[w()])),
e=void 0}return e}function Xa(){var b=[];for(b.push(W());p===X;)h(),b.push(W());return m(l[X],b)}function u(){s(I);var b=N();s(M);return b}function Za(){var e,a;for(e=[y()];(a=p)===J;){h({oneCharToken:!0});var c;c=e[0];c=c.op!==b.VAR?!1:(c=b.env[c.args[0]])&&c.name?!0:!1;!c&&!d()||(a=p)!==E&&a!==C?(a=z(),a.op===b.VAR&&"\\circ"===a.args[0]&&(p===B&&"K"===w()||"C"===w()||"F"===w()?(a=G([e.pop(),x(b.VAR,["\\degree "+w()])]),h()):a=G([e.pop(),x(b.VAR,["\\degree"])])),e.push(a)):(h(),e.push(x(l[a],[fa])))}a=
1<e.length?m(b.POW,e):e[0];switch(e=p){case $a:h();a=m(b.PERCENT,[a]);break;case ab:h();a=m(b.FACT,[a]);break;default:e===B&&"\\degree"===w()?(h(),p!==B||"K"!==w()&&"C"!==w()&&"F"!==w()?a=G([a,x(b.VAR,["\\degree"])]):(a=G([a,x(b.VAR,["\\degree "+w()])]),h())):!d()||e!==E&&e!==C||F()!==M||(h(),a=x(l[e],[a]))}return a}function z(){var e,a;switch(e=p){case E:h();a=z();break;case C:h();a=ea(z());break;case Y:h();a=z();a=m(l[e],[a]);break;case H:var d=l[e];h({oneCharToken:!0});(e=p)===E||e===C?(h(),a=
fa):a=z();a=m(d,[a]);p===J&&(d=l[e],h({oneCharToken:!0}),(e=p)===E||e===C?(h(),a=fa):a=z(),a=m(d,[a]));break;case J:d=l[e];h({oneCharToken:!0});(e=p)===E||e===C?(h(),a=fa):a=z();a=m(d,[a]);break;default:e===B&&"$"===w()?(h(),a=p?G([m(b.VAR,["$"]),Za()]):m(b.VAR,["$"])):a=Za()}return a}function bb(){var a=[z()];p===H&&(h({oneCharToken:!0}),a.push(z()),d()&&p===I&&(s(I),s(M)));return 1<a.length?m(b.SUBSCRIPT,a):a[0]}function cb(){for(var a=bb();p===Ra;)h(),a=m(b.FRAC,[a,bb()]),a.isFraction=!0;return a}
function La(){var a,c,g=!1,f=[];c=cb();for(f=c.op!==b.MUL||c.isBinomial?[c]:c.args;(a=p)&&!db(a)&&!eb(a)&&a!==ga&&a!==ha&&a!==M&&a!==S&&a!==T&&a!==P&&a!==Z&&a!==D&&a!==U&&a!==X&&a!==oa;){g=!1;if(a===$||a===ia||a===Ra)h(),g=!0;c=cb();a===ia&&(c=m(b.POW,[c,O]));var k;if(k=d())if(k=a===ba)k=f[f.length-1],assert(!0,"Internal error in 'isVar()'"),k=k.op!==b.VAR?!1:void 0===k?!0:"M"===k.args[0];if(k)f.pop(),c=x(b.M,[c]);else{if(k=!g)if(k=0<f.length)k=[f[f.length-1],c],k=k[0].lbrk||k[1].lbrk||k[0].op!==
b.NUM||k[1].op!==b.FRAC||"integer"!==k[0].numberFormat||k[1].args[0].op!==b.NUM||"integer"!==k[1].args[0].numberFormat||k[1].args[1].op!==b.NUM||"integer"!==k[1].args[1].numberFormat?!1:!0;if(k)a=f.pop(),Sa(a)&&(c=v(b.MUL,[O,c])),c=v(b.ADD,[a,c]),c.isMixedFraction=!0;else{if(k=!g)if(k=0<f.length)k=[f[f.length-1],c],k=k[0].lbrk||k[1].lbrk||k[0].op!==b.NUM||"decimal"!==k[0].numberFormat||k[1].op!==b.OVERLINE?!1:!0;if(k)g=f.pop(),c=c.args[0],c=t("."+c.args[0]),c.isRepeating=!0,0<=g.args[0].indexOf(".")&&
(k=g.args[0].length-g.args[0].indexOf(".")-1,c=G([c,v(b.POW,[t("10"),t("-"+k)])])),c=v(b.ADD,[g,c]),c.numberFormat="decimal",c.isRepeating=!0;else{if(k=a===$)if(k=0<f.length)g&&(k=[f[f.length-1],c],1===k.length?g=k[0].op===b.NUM&&(1===k[0].args[0].length||1===k[0].args[0].indexOf(r()))||k[0].op===b.POW&&k[0].args[0].op===b.NUM&&"10"===k[0].args[0].args[0]&&"integer"===k[0].args[1].numberFormat?!0:!1:2===k.length?(g=k[0],k=k[1],g=g.op!==b.NUM||1!==g.args[0].length&&1!==g.args[0].indexOf(r())||k.op!==
b.POW||k.args[0].op!==b.NUM||"10"!==k.args[0].args[0]||"integer"!==k.args[1].numberFormat?!1:!0):g=void 0),k=g;k&&(a=f.pop(),Sa(a)&&(c=v(b.MUL,[O,c])),c=v(b.MUL,[a,c]),c.isScientific=!0)}}}c.op!==b.MUL||c.isScientific||c.isBinomial?f.push(c):f=f.concat(c.args)}return 1<f.length?G(f):f[0]}function Sa(e){if("number"===typeof e)return 0>e;if(1===e.args.length)return e.op===a.SUB&&0<e.args[0].args[0]||e.op===b.NUM&&0>+e.args[0];if(2===e.args.length)return e.op===a.MUL&&Sa(e.args[0])}function ea(a){if("number"===
typeof a)return-a;if(a.op===b.NUM){if("-"!==a.args[0].charAt(0))return t("-"+a.args[0])}else if(a.op===b.MUL)return a.args.unshift(ea(a.args.shift())),a;return x(b.SUB,[a])}function db(b){return b===E||b===C||b===Y||b===ja}function V(){for(var a=La(),c;db(c=p);){h();var d=La();switch(c){case ja:a=v(b.BACKSLASH,[a,d]);break;case Y:a=v(b.PM,[a,d]);break;case C:d=ea(d);default:a=v(b.ADD,[a,d],!0)}}return a}function eb(a){return a===Z||a===ka||a===la||a===ma||a===Ta||a===Ua||a===Va}function W(){var a;
if(p===ha)a=m(b.VAR,["_"]);else{for(var c=V(),d=[];eb(a=p);){h();var g=V(),c=m(l[a],[c,g]);d.push(c);c=g}a=0===d.length?c:1===d.length?d[0]:m(b.COMMA,d)}for(var f,c=[];(f=p)===ha||f===P;)h(),d=0===p?m(b.VAR,["_"]):V(),a=m(l[f],[a,d]),c.push(a),a=d;return 0===c.length?a:1===c.length?c[0]:m(b.COMMA,c)}function N(){for(var a=W(),b=[a];p===ga;)h(),b.push(W());return 1<b.length?m(l[ga],b):a}var R=0,E=43,J=94,H=95,ta=261,za=264,Aa=265,da=256,Ra=47,ha=61,Ba=263,I=123,D=124,ca=91,ba=40,$=42,na=48,Y=258,M=
125,T=93,S=41,ya=262,sa=259,qa=257,C=45,ua=260,B=97,ga=44,Ca=267,Da=268,Z=270,ka=271,la=272,ma=273,Ia=274,Ta=275,Ja=276,Ea=277,Ka=278,Ua=279,Fa=280,Ga=281,Ha=282,$a=37,Ya=283,P=284,ab=33,pa=285,U=286,X=287,Wa=288,oa=289,Va=58,ra=290,va=291,wa=292,xa=293,ia=294,Ma=295,Na=296,Oa=297,Pa=298,ja=299,Qa=300,p=R,Q=R,l={};l[Ra]=a.FRAC;l[da]=a.FRAC;l[qa]=a.SQRT;l[ra]=a.VEC;l[E]=a.ADD;l[C]=a.SUB;l[Y]=a.PM;l[J]=a.POW;l[H]=a.SUBSCRIPT;l[$]=a.MUL;l[ia]=a.DIV;l[sa]=a.SIN;l[ta]=a.COS;l[ua]=a.TAN;l[va]=a.ARCSIN;
l[wa]=a.ARCCOS;l[xa]=a.ARCTAN;l[ya]=a.SEC;l[za]=a.COT;l[Aa]=a.CSC;l[Ba]=a.LN;l[Ca]=a.LG;l[Da]=a.LOG;l[ha]=a.EQL;l[ga]=a.COMMA;l[269]=a.TEXT;l[Z]=a.LT;l[ka]=a.LE;l[la]=a.GT;l[ma]=a.GE;l[Ia]=a.EXISTS;l[Ta]=a.IN;l[Ja]=a.FORALL;l[Ea]=a.LIM;l[Ka]=a.EXP;l[Ua]=a.TO;l[Fa]=a.SUM;l[Ga]=a.INT;l[Ha]=a.PROD;l[Ya]=a.M;l[P]=a.RIGHTARROW;l[ab]=a.FACT;l[pa]=a.BINOM;l[U]=a.ROW;l[X]=a.COL;l[Va]=a.COLON;l[Ma]=a.FORMAT;l[Na]=a.OVERLINE;l[Oa]=a.OVERSET;l[Pa]=a.UNDERSET;l[ja]=a.BACKSLASH;l[Qa]=a.MATHBF;var fa=t("1"),O=
t("-1"),gb=m(b.NONE,[t("0")]),L=function(a){function d(a){return 65<=a&&90>=a||97<=a&&122>=a}function f(a){return 48<=a&&57>=a}function l(b){var c=String.fromCharCode(b);for(h+=c;d(b)||39===b;){b=a.charCodeAt(k++);var c=String.fromCharCode(b),f=h+c;if(!some(p,function(a){return 0===a.indexOf(f)}))break;h+=c}for(;39===b;)b=a.charCodeAt(k++),c=String.fromCharCode(b),h+=c;k--;return B}var k=0,h="",m={"\\cdot":$,"\\times":$,"\\div":ia,"\\dfrac":da,"\\frac":da,"\\sqrt":qa,"\\vec":ra,"\\pm":Y,"\\sin":sa,
"\\cos":ta,"\\tan":ua,"\\sec":ya,"\\cot":za,"\\csc":Aa,"\\arcsin":va,"\\arccos":wa,"\\arctan":xa,"\\ln":Ba,"\\lg":Ca,"\\log":Da,"\\left":null,"\\right":null,"\\big":null,"\\Big":null,"\\bigg":null,"\\Bigg":null,"\\ ":null,"\\quad":null,"\\qquad":null,"\\text":269,"\\textrm":269,"\\textit":269,"\\textbf":269,"\\lt":Z,"\\le":ka,"\\gt":la,"\\ge":ma,"\\exists":Ia,"\\in":Ta,"\\forall":Ja,"\\lim":Ea,"\\exp":Ka,"\\to":Ua,"\\sum":Fa,"\\int":Ga,"\\prod":Ha,"\\%":$a,"\\rightarrow":P,"\\longrightarrow":P,"\\binom":pa,
"\\begin":Wa,"\\end":oa,"\\colon":Va,"\\vert":D,"\\lvert":D,"\\rvert":D,"\\mid":D,"\\format":Ma,"\\overline":Na,"\\overset":Oa,"\\underset":Pa,"\\backslash":ja,"\\mathbf":Qa},p=keys(c),s;return{start:function(c){c||(c={});var n;for(h="";k<a.length;)switch(n=a.charCodeAt(k++)){case 32:case 9:case 10:case 13:continue;case 38:if(0===a.substring(k).indexOf("nbsp;")){k+=5;continue}return X;case 92:h+=String.fromCharCode(n);if(92===a.charCodeAt(k))return k++,U;n=a.charCodeAt(k++);if(36===n)h=String.fromCharCode(n);
else if(37===n)h+=String.fromCharCode(n);else if(0<=[32,58,59,44,33].indexOf(n))h="\\ ";else{for(;d(n);)h+=String.fromCharCode(n),n=a.charCodeAt(k++);k--}n=m[h];if(void 0===n)n=B;else if(269===n){for(n=a.charCodeAt(k++);n&&123!==n;)n=a.charCodeAt(k++);h="";for(n=a.charCodeAt(k++);n&&125!==n;)n=String.fromCharCode(n),"&"===n&&0===a.substring(k).indexOf("nbsp;")?k+=5:" "!==n&&"\t"!==n&&(h+=n),n=a.charCodeAt(k++);assert(""!==h,g(1009,["\\text"]));n=b.option("ignoreText")?null:B}if(null!==n)return n;
h="";continue;case 45:if(62===a.charCodeAt(k))return k++,P;case 33:case 37:case 40:case 41:case 42:case 43:case 44:case 47:case 58:case 61:case 91:case 93:case 94:case 95:case 123:case 124:case 125:return h+=String.fromCharCode(n),n;case 36:return h+=String.fromCharCode(n),B;case 60:return h+=String.fromCharCode(n),61===a.charCodeAt(k)?(h+=String.fromCharCode(61),k++,ka):Z;case 62:return h+=String.fromCharCode(n),61===a.charCodeAt(k)?(h+=String.fromCharCode(61),k++,ma):la;default:if(d(n)||39===n)return l(n);
if(String.fromCharCode(n)===r()||f(n)){if(c.oneCharToken)return h+=String.fromCharCode(n),na;for(c=n;f(c)||r()===String.fromCharCode(c)||(s=q(String.fromCharCode(c),s))&&f(a.charCodeAt(k+1));)h+=String.fromCharCode(c),c=a.charCodeAt(k++),92===c&&32===a.charCodeAt(k)&&(c=32,k++);"."===h&&0===indexOf(a.substring(k),"overline")&&(h="0.");k--;return na}assert(!1,g(1004,[String.fromCharCode(n),n]));return 0}return 0},lexeme:function(){return h},pos:function(){return k}}}(f);return{expr:function(){if(p=
L.start(void 0)){var a=N();assert(!p,g(1003,[L.pos(),L.lexeme()]));return a}return gb}}};return b}();
